# Describes the targets run in continuous integration environment.
#
# Flutter infra uses this file to generate a checklist of tasks to be performed
# for every commit.
#
# More information at:
#  * https://github.com/flutter/cocoon/blob/main/CI_YAML.md
enabled_branches:
  - main
  - master
  - dev
  - beta
  - stable
  - flutter-2.7-candidate.5
  - fuchsia_f7

platform_properties:
  linux:
    properties:
      build_host: "false"
      build_fuchsia: "false"
      build_android_debug: "false"
      build_android_aot: "false"
      build_android_vulkan: "false"
      build_ios: "false"
      build_windows_uwp: "false"
      build_android_jit_release: "false"
      gcs_goldens_bucket: ""
      ios_debug: "false"
      ios_profile: "false"
      ios_release: "false"
      no_bitcode: "false"
      caches: >-
        [
          {"name":"builder_linux_engine","path":"builder"},
          {"name":"gradle","path":"gradle"},
          {"name":"openjdk","path":"java"}
        ]
      # CIPD flutter_internal/java/openjdk/$platform
      dependencies: >-
        [
          {"dependency": "open_jdk", "version": "version:1.8.0u202-b08"},
          {"dependency": "gradle_cache"}
        ]
      device_type: none
      os: Linux
  mac:
    properties:
      build_host: "false"
      build_fuchsia: "false"
      build_android_debug: "false"
      build_android_aot: "false"
      build_android_vulkan: "false"
      build_ios: "false"
      build_windows_uwp: "false"
      build_android_jit_release: "false"
      gcs_goldens_bucket: ""
      ios_debug: "false"
      ios_profile: "false"
      ios_release: "false"
      no_bitcode: "false"
      caches: >-
        [
          {"name":"flutter_cocoapods","path":"cocoapods"},
          {"name":"old_osx_sdk","path":"osx_sdk"},
          {"name":"builder_mac_engine","path":"builder"},
          {"name":"openjdk","path":"java"}
        ]
      # CIPD flutter_internal/java/openjdk/$platform
      dependencies: >-
        [
          {"dependency": "open_jdk", "version": "version:1.8.0u202-b08"}
        ]
      device_type: none
      mac_model: "Macmini8,1"
      os: Mac-10.15
      xcode: 12a7209 # xcode 12
  windows:
    properties:
      build_host: "false"
      build_fuchsia: "false"
      build_android_debug: "false"
      build_android_aot: "false"
      build_android_vulkan: "false"
      build_ios: "false"
      build_windows_uwp: "false"
      build_android_jit_release: "false"
      gcs_goldens_bucket: ""
      ios_debug: "false"
      ios_profile: "false"
      ios_release: "false"
      no_bitcode: "false"
      caches: >-
        [
          {"name":"builder_win_engine","path":"builder"},
          {"name":"openjdk","path":"java"}
        ]
      # CIPD flutter_internal/java/openjdk/$platform
      dependencies: >-
        [
          {"dependency": "open_jdk", "version": "version:1.8.0u202-b08"}
        ]
      device_type: none
      os: Windows-10

targets:
  - name: Linux Fuchsia
    recipe: engine
    properties:
      add_recipes_cq: "true"
      build_fuchsia: "true"
      fuchsia_ctl_version: version:0.0.27
    timeout: 90
    scheduler: luci

  - name: Linux Fuchsia FEMU
    recipe: femu_test
    properties:
      add_recipes_cq: "true"
      build_fuchsia: "true"
      fuchsia_ctl_version: version:0.0.27
    timeout: 60
    scheduler: luci
